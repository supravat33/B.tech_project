<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEC Information System</title>
    <link rel="stylesheet" href="Landing.css">
</head>

<body>
    <header class="header">
        <div class="logo">
            <a href="../index.html"><img src="../Images/college_logo.png" alt="GEC Logo"></a>
        </div>
        <div class="title">
            <h1>GEC Information System</h1>
            <p>Salia Sahi, Bhubaneswar, Odisha</p>
        </div>
        <nav class="navbar">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="#">Notice Board</a></li>
                <li><a href="#">NEWS Letters</a></li>
                <li><a href="UserBusSchdule.html">Bus Schedule</a></li>
                <li><a href="#">Journals</a></li>
            </ul>
        </nav>
        <div class="login-section">
            <form id="loginForm">
                <input type="text" id="username" placeholder="User Name" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
        </div>
    </header>

    <div class="main-container">
        <div class="left-section">
            <div class="current-news">
                <h2 style="display: flex; justify-content: space-between; align-items: center;">
                    Current News
                    <button id="refreshBtn" style="font-size: 12px;">üîÅ Refresh</button>
                </h2>
                <div id="newsContentWrapper">
                    <div id="loadingSpinner" style="display:none; text-align:center;">
                        <img src="../Images/spinner.gif" alt="Loading..." style="width: 30px; height: 30px;" />
                    </div>
                    <p id="noNewsMessage">Loading latest news...</p>
                </div>
            </div>




            <div class="announcement">
                <h2>Announcement</h2>
                <p>CESS-2022 GEC is organizing a National Event...</p>
            </div>
            <div class="notices">
                <h2>Notices</h2>
                <ul>
                    <li>Notice Anti-intoxication at GEC Campus</li>
                    <li>GEC SOP for Foundation Day Award</li>
                    <li>AEIS</li>
                </ul>
            </div>
        </div>

        <div class="notice-board">
            <h2>Notice Board</h2>
            <div class="notice-item">
                <img src="../Images/profile.png" alt="Student">
                <p><strong>FAIL LIST in B.Tech 1st Sem C Programming Lab</strong></p>
                <p>Name: K. Venu Gopal Patnaik</p>
                <p>Reason: Absent in all regular labs</p>
                <a href="#">More...</a>
            </div>
            <div class="notice-item">
                <img src="../Images/profile.png" alt="Student">
                <p><strong>FAIL LIST in B.Tech 1st Sem C Programming Lab</strong></p>
                <p>Name: Swayam Shree Dash</p>
                <p>Reason: Absent in 8 regular labs</p>
                <a href="#">More...</a>
            </div>
        </div>

        <div class="right-section">
            <div class="nist-chronicle">
                <h2>GEC Chronicle</h2>
                <img src="../Images/brocure.png" alt="GEC Chronicle">
                <p>View Details</p>
            </div>
            <div class="admissions">
                <h2>Admissions 2023-24</h2>
                <ul>
                    <li><a href="#">Admission to College of Engineering</a></li>
                    <li><a href="#">Admission to College of Management</a></li>
                    <li><a href="#">Admission to College of Science</a></li>
                    <li><a href="#">Admission to PhD Program</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script src="Landing.js"></script>
    <script>
        function fetchLatestNews() {
            const container = document.getElementById('newsContentWrapper');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const noNewsMessage = document.getElementById('noNewsMessage');

            // Show the loading spinner
            loadingSpinner.style.display = 'block';
            noNewsMessage.style.display = 'none';

            // Clear current content
            container.innerHTML = '';

            // Make sure you're calling the correct path for fetchNews.php
            fetch('fetchNews.php')
                .then(res => {
                    if (!res.ok) {
                        throw new Error('Failed to fetch');
                    }
                    return res.json();
                })
                .then(data => {
                    loadingSpinner.style.display = 'none'; // Hide spinner when done

                    if (data.articles && data.articles.length > 0) {
                        data.articles.forEach(article => {
                            const newsItem = `
                        <div class="news-item">
                            <p><strong>${article.title}</strong></p>
                            <p>${article.description || ''}</p>
                            <p><small>Published on: ${article.publishedAt}</small></p> <!-- Display the publication date -->
                            <p><a href="${article.url}" target="_blank">Read more...</a></p>
                            <p><small>Source: <a href="${article.source.url}" target="_blank">${article.source.name}</a></small></p>
                        </div>
                    `;
                            container.innerHTML += newsItem;
                        });
                    } else {
                        container.innerHTML = '<p>No recent news available.</p>';
                    }
                })
                .catch(() => {
                    loadingSpinner.style.display = 'none';
                    container.innerHTML = '<p>Unable to fetch news. Please try again.</p>';
                });
        }

        // Auto fetch on page load
        document.addEventListener('DOMContentLoaded', fetchLatestNews);

        // Refresh button handler
        document.getElementById('refreshBtn').addEventListener('click', fetchLatestNews);

    </script>
</body>

</html>